# 現物公開API

* [共通情報](#id1)
  * [リクエスト方法](#id2)
  * [戻り値](#id3)
  * [エラーメッセージ](#id4)
  * [補足](#id5)
* [個別情報](#id6)
  * [通貨情報の取得](#id7)
  * [通貨ペア情報の取得](#id12)
  * [現在の終値を取得](#id17)
  * [ティッカーの取得](#id22)
  * [全ユーザー取引履歴の取得](#id28)
  * [板情報の取得](#id34)
  * [VASP情報の取得](#id39)
  * [送金先国情報取得](#id43)
  * [法人種別情報取得](#id47)

------------------------------------------------------------------------------------------------------------------------

## 共通情報

現物公開APIの共通情報です。

------------------------------------------------------------------------------------------------------------------------

### リクエスト方法

* エンドポイント：https://api.zaif.jp/api/1

* メソッド：GET

### 戻り値
* 全てjson形式となっています。フォーマットはAPIによって変わります。

### エラーメッセージ
```eval_rst
=============================================== ===================================================================
メッセージ                                      詳細
=============================================== ===================================================================
unsupported method                              サポート外のmethodです。
=============================================== ===================================================================
```

### 補足
* 呼び出しは1秒間に10回以下におさまるようにしてください。呼び出しが多すぎるとアクセス拒否されることがあります。

------------------------------------------------------------------------------------------------------------------------

## 個別情報

現物公開APIの個別情報です。

------------------------------------------------------------------------------------------------------------------------
### 通貨情報の取得
通貨情報を取得します。

#### リクエスト方法
  * /currencies/{currency}
  
  例）https://api.zaif.jp/api/1/currencies/btc


#### パラメータ
* なし

#### 戻り値
```eval_rst
+--------+----------+--------+
|キー    | 詳細     |型      |
+========+==========+========+
|name    |通貨の名前|str     |
+--------+----------+--------+
|is_token|token種別 |boolean |
+--------+----------+--------+
```

currencyにallを指定した場合、有効な全ての通貨情報を取得します。

```
[
    {
        "name": "btc",
        "is_token": false
    },
    {
        "name": "XCP",
        "is_token": true
    },
    ...
]
```
currencyにbtc等、有効な通貨情報を指定した場合、その情報のみを取得します。

```
[
    {
        "name": "btc",
        "is_token": false
    }
]
```

#### 補足
* token種別

  tokenの場合、true。

------------------------------------------------------------------------------------------------------------------------

### 通貨ペア情報の取得
通貨ペア情報を取得します。

#### リクエスト方法
* /currency_pairs/{currency_pair}

例）https://api.zaif.jp/api/1/currency_pairs/btc_jpy

#### パラメータ
* なし

#### 戻り値
```eval_rst
+--------------+-----------------------------+--------+
|キー          |詳細                         |型      |
+==============+=============================+========+
|name          |通貨ペアの名前               |str     |
+--------------+-----------------------------+--------+
|title         |通貨ペアのタイトル           |str     |
+--------------+-----------------------------+--------+
|currency_pair |通貨ペアのシステム文字列     |str     |
+--------------+-----------------------------+--------+
|description   |通貨ペアの詳細               |str     |
+--------------+-----------------------------+--------+
|is_token      |token種別                    |boolean |
+--------------+-----------------------------+--------+
|event_number  |イベントトークンの場合、0以外|int     |
+--------------+-----------------------------+--------+
|seq           |通貨シークエンス             |int     |
+--------------+-----------------------------+--------+
|item_unit_min |基軸通貨最小値               |float   |
+--------------+-----------------------------+--------+
|item_unit_step|基軸通貨最小単位             |float   |
+--------------+-----------------------------+--------+
|item_japanese |基軸通貨日本語表記           |str     |
+--------------+-----------------------------+--------+
|aux_unit_min  |決済通貨最小値               |float   |
+--------------+-----------------------------+--------+
|aux_unit_step |決済通貨最小単位             |float   |
+--------------+-----------------------------+--------+
|aux_unit_point|決済通貨小数点桁数           |int     |
+--------------+-----------------------------+--------+
|aux_japanese  |決済通貨日本語表記           |str     |
+--------------+-----------------------------+--------+
```

currency_pairにallを指定した場合、有効な全ての通貨ペア情報を取得します。

```
[
    {
        "name": "BTC/JPY",
        "title": "BTC/JPY",
        "currency_pair": "btc_jpy",
        "description": "\u30d3\u30c3\u30c8\u30b3\u30a4\u30f3\u30fb\u65e5\u672c\u5186\u306e\u53d6\u5f15\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059",
        "is_token": false,
        "event_number": 0,
        "item_unit_min": 0.0001,
        "item_unit_step": 0.0001,
        "aux_unit_min": 5.0,
        "aux_unit_step": 5.0,
        "seq": 0,
        "aux_japanese": "\u65e5\u672c\u5186",
        "item_japanese": "\u30d3\u30c3\u30c8\u30b3\u30a4\u30f3",
        "aux_unit_point": 0,
    },
    {
        "name": "KINOKOUSAKA/JPY",
        "title": "KINOKOUSAKA/JPY \u53d6\u5f15\u6240 - ZAIF Exchange",
        "currency_pair": "kinokousaka_jpy",
        "description": "KINOKOUSAKA/JPY \u53d6\u5f15\u6240\u3002KINOKOUSAKA\u3068\u65e5\u672c\u5186\u306e\u53d6\u5f15\u304c\u884c\u3048\u307e\u3059\u3002",
        "is_token": true,
        "event_number": 1,
        "item_unit_min": 0.01,
        "item_unit_step": 0.01,
        "aux_unit_min": 0.01,
        "aux_unit_step": 0.01,
        "seq": 134,
        "aux_japanese": "\u65e5\u672c\u5186",
        "item_japanese": "KINOKOUSAKA",
        "aux_unit_point": 2,
    }
    ...
]
```
currency_pairにbtc_jpy等、有効な通貨ペア情報を指定した場合、その情報のみを取得します。
```
[
    {
        "name": "BTC/JPY",
        "title": "BTC/JPY",
        "currency_pair": "btc_jpy",
        "description": "\u30d3\u30c3\u30c8\u30b3\u30a4\u30f3\u30fb\u65e5\u672c\u5186\u306e\u53d6\u5f15\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059",
        "is_token": false,
        "event_number": 0,
        "item_unit_min": 0.0001,
        "item_unit_step": 0.0001,
        "aux_unit_min": 5.0,
        "aux_unit_step": 5.0,
        "seq": 0,
        "aux_japanese": "\u65e5\u672c\u5186",
        "item_japanese": "\u30d3\u30c3\u30c8\u30b3\u30a4\u30f3",
        "aux_unit_point": 0,
    }
]
```

#### 補足
* token種別
  
  tokenの場合、true。

------------------------------------------------------------------------------------------------------------------------

### 現在の終値を取得
現在の終値を取得します。

#### リクエスト方法
* /last_price/{currency_pair}

例）https://api.zaif.jp/api/1/last_price/btc_jpy

``` note::
 currency_pairに指定できる値は `通貨ペア情報の取得`_ を参照してください。
```

#### パラメータ
* なし

#### 戻り値
```eval_rst
=========== =========== =======
キー        詳細         型
=========== =========== =======
last_price  現在の終値  float
=========== =========== =======
```
```
{
    "last_price": 134820.0
}
```

#### エラーメッセージ
```eval_rst
=============================================== ===================================================================
メッセージ                                      詳細
=============================================== ===================================================================
unsupported currency_pair                       サポートされていない通貨ペアです。
currency_pair missing                           リクエストされた通貨ペアが不適切です。
=============================================== ===================================================================
```

------------------------------------------------------------------------------------------------------------------------

### ティッカーの取得
ティッカーを取得します。

#### リクエスト方法
* /ticker/{currency_pair}

例）https://api.zaif.jp/api/1/ticker/btc_jpy

``` note::
 currency_pairに指定できる値は `通貨ペア情報の取得`_ を参照してください。
```

#### パラメータ
* なし

#### 戻り値
```eval_rst
======== ===================== =======
キー     詳細                  型
======== ===================== =======
last     終値                  float
high     過去24時間の高値      float
low      過去24時間の安値      float
vwap     過去24時間の加重平均  float
volume   過去24時間の出来高    float
bid      買気配値              float
ask      売気配値              float
======== ===================== =======
```
```
{
    "last": 135875.0,
    "high": 136000.0,
    "low": 131570.0,
    "vwap": 133301.7489,
    "volume": 6889.215,
    "bid": 135875.0,
    "ask": 135920.0
}
```

#### エラーメッセージ
```eval_rst
=============================================== ===================================================================
メッセージ                                      詳細
=============================================== ===================================================================
unsupported currency_pair                       サポートされていない通貨ペアです。
currency_pair missing                           リクエストされた通貨ペアが不適切です。
=============================================== ===================================================================
```

#### 補足
	
* vwap算出方法

	個々の取引価格*個々の取引量　→　A

	Aの過去24時間分を合算　→　B

	過去24時間分の個々の取引量を合算　→　C

	B/C →　vwap

------------------------------------------------------------------------------------------------------------------------

### 全ユーザー取引履歴の取得
全ユーザの取引履歴を取得します。<br />
取得できる取引履歴は最新のものから最大150件となります。<br />

#### リクエスト方法
* /trades/{currency_pair}

例）https://api.zaif.jp/api/1/trades/btc_jpy

``` note::
 currency_pairに指定できる値は `通貨ペア情報の取得`_ を参照してください。
```

#### パラメータ
* なし

#### 戻り値
```eval_rst
============= ======== ==============
キー          詳細     型
============= ======== ==============
date          取引日時 UNIX_TIMESTAMP
price         取引価格 float
amount        取引量   float
tid           取引ID   int
currency_pair 通貨ペア str
trade_type    取引種別 str
============= ======== ==============
```
```
[
    {
        "date": 1491756592,
        "price": 135340.0,
        "amount": 0.02,
        "tid": 43054307,
        "currency_pair": "btc_jpy",
        "trade_type": "ask"
    },
    {
        "date": 1491756591,
        "price": 135345.0,
        "amount": 0.01,
        "tid": 43054306,
        "currency_pair": "btc_jpy",
        "trade_type": "bid"
    },
    ...
]
```

#### エラーメッセージ
```eval_rst
=============================================== ===================================================================
メッセージ                                      詳細
=============================================== ===================================================================
unsupported currency_pair                       サポートされていない通貨ペアです。
currency_pair missing                           リクエストされた通貨ペアが不適切です。
=============================================== ===================================================================
```

#### 補足
* 取引種別

  bid：買い　ask：売り

------------------------------------------------------------------------------------------------------------------------

### 板情報の取得
板情報を取得します。<br />
売り情報は価格の昇順、買い情報は価格の降順でソートされた状態で返却されます。<br />
情報数は最大150件となります。<br />

#### リクエスト方法
* /depth/{currency_pair}

例）https://api.zaif.jp/api/1/depth/btc_jpy

``` note::
 currency_pairに指定できる値は `通貨ペア情報の取得`_ を参照してください。
```

#### パラメータ
* なし

#### 戻り値
```eval_rst
==== ========== =====
キー 詳細       型
==== ========== =====
asks 売り板情報 list
bids 買い板情報 list
==== ========== =====
```
```
{
    "asks": [
        [
            134875.0,
            0.0063
        ],
        [
            134885.0,
            0.1639
        ],
        ...
    ],
    "bids": [
        [
            134870.0,
            0.01
        ],
        [
            134865.0,
            0.3066
        ],
        ...
    ]
}
```

#### エラーメッセージ
```eval_rst
=============================================== ===================================================================
メッセージ                                      詳細
=============================================== ===================================================================
unsupported currency_pair                       サポートされていない通貨ペアです。
currency_pair missing                           リクエストされた通貨ペアが不適切です。
=============================================== ===================================================================
```

#### 補足
* 売り(買い)板情報
	
	配列の最初が価格、最後が量。

------------------------------------------------------------------------------------------------------------------------

### VASP情報の取得（ 2022年4月1日より取得可能 ）
VASP情報を取得します。<br />
取得したIDを現物取引API withdraw (出金申請)の「VASP情報ID」に指定します。<br />
全てのレコードを取得する場合は、「vasp_master_id」に「all」を指定します。<br />
個別のIDに対応するレコードのみを取得する場合は、「vasp_master_id」に個別のIDを指定します。<br />
指定されたvasp_master_idに該当するIDが存在しなかった場合や、正しくないフォーマットの文字列が指定された場合は<br />
空のリストを返却します。<br />

#### リクエスト方法
* /vasp_info/{vasp_master_id}

例）<br />
全件を取得する場合<br />
https://api.zaif.jp/api/1/vasp_info/all

個別のID毎で取得する場合<br />
https://api.zaif.jp/api/1/vasp_info/12


#### パラメータ
```eval_rst
=============== ==== ============================ ========================= ===========
パラメータ      必須 詳細                         型                        デフォルト
=============== ==== ============================ ========================= ===========
vasp_master_id  Yes  VASP情報ID                   str (all または個別のID)
=============== ==== ============================ ========================= ===========
```

#### 戻り値
```eval_rst
===== =========== ==========
キー  詳細        型
===== =========== ==========
id    VASP情報ID  list
name  VASP名      list
===== =========== ==========
```

vasp_master_id 「all」の場合<br />

```
[
    [
        2,
        {
            "id": 2,
            "name": "タロウ証券"
        }
    ],
    [
        3,
        {
            "id": 3,
            "name": "Coinhanako"
        }
    ],
・・・
    [
        1,
        {
            "id": 1,
            "name": "その他"
        }
    ]
]
```

vasp_master_id 「23」（個別のID）の場合<br />

```
[
    {
        "id": 23,
        "name": "OKTaro"
    }
]
```

------------------------------------------------------------------------------------------------------------------------

### 送金先国情報取得（ 2022年10月27日より取得可能 ）
送金先として有効な国コードと国名を一覧で取得します。<br />
取得した国コードをwithdraw (出金申請)の「beneficiary_country_id」に指定します。<br />
全ての国コードを取得する場合は、「code」に「all」を指定します。<br />
個別の国コードに対応するレコードのみを取得する場合は、「code」に個別の国コードを指定します。<br />
指定された国コードが存在しなかった場合や、正しくないフォーマットの文字列が指定された場合は<br />
空のリストを返却します。<br />

#### リクエスト方法
* /country_info/{code}

例）<br />
全件を取得する場合<br />
https://api.zaif.jp/api/1/country_info/all

個別の国コードで取得する場合<br />
https://api.zaif.jp/api/1/country_info/JP


#### パラメータ
```eval_rst
=============== ==== ============================ ========================= ===========
パラメータ      必須 詳細                         型                        デフォルト
=============== ==== ============================ ========================= ===========
code            Yes  国コード                     str (all または個別のID)
=============== ==== ============================ ========================= ===========
```

#### 戻り値
```eval_rst
===== =========== ==========
キー  詳細        型
===== =========== ==========
code  国コード    list
name  国名        list
===== =========== ==========
```

code 「all」の場合<br />

```
[
    {
        "code": "AF",
        "name": "Afghanistan"
    },
    {
        "code": "AX",
        "name": "\u00c5land Islands"
    },
    ・・・
    {
        "code": "ZW",
        "name": "Zimbabwe"
    }
]
```

code 「US」（個別の国コード）の場合<br />

```
[
    {
        "code": "US",
        "name": "United States"
    }
]
```


------------------------------------------------------------------------------------------------------------------------

### 法人種別情報取得（ 2022年10月27日より取得可能 ）
法人種別として有効なIDと法人種別の名称を一覧で取得します。<br />
取得したIDをwithdraw (出金申請)の「corp_type_id」に指定します。<br />
全ての法人種別を取得する場合は、「id」に「all」を指定します。<br />
個別の法人種別に対応するレコードのみを取得する場合は、「id」に個別のIDを指定します。<br />
指定されたIDに相当する法人種別が存在しなかった場合や、正しくないフォーマットの文字列が指定された場合は<br />
空のリストを返却します。<br />

#### リクエスト方法
* /corp_type_id_info/{id}

例）<br />
全件を取得する場合<br />
https://api.zaif.jp/api/1/corp_type_id_info/all

個別の法人種別を取得する場合<br />
https://api.zaif.jp/api/1/corp_type_id_info/2


#### パラメータ
```eval_rst
=============== ==== ============================ ========================= ===========
パラメータ      必須 詳細                         型                        デフォルト
=============== ==== ============================ ========================= ===========
id              Yes  法人種別のID                 str (all または個別のID)
=============== ==== ============================ ========================= ===========
```

#### 戻り値
```eval_rst
===== ============= ==========
キー  詳細          型
===== ============= ==========
id    法人種別のID  list
name  名称          list
===== ============= ==========
```

id 「all」の場合<br />

```
[
    [
    2,
        {
            "id": 2,
            "name": "株式会社"
        }
   ],
   [
   3,
        {
            "id": 3,
            "name": "有限会社"
        }
    ],
    ・・・
 ]
```

id 「2」（個別のID）の場合<br />

```
[
    {
        "id": 2,
        "name": "株式会社"
    }
]
```

------------------------------------------------------------------------------------------------------------------------

### 営業状態の取得
通貨ペアの営業状態を取得します。

#### リクエスト方法
* /market_status/{currency_pair}

例）https://api.zaif.jp/api/1/market_status/btc_jpy

#### パラメータ
* なし

#### 戻り値
```eval_rst
============= ================== =======
キー          詳細                型
============= ================== =======
currency_pair 通貨ペア            str
market_status 営業状態            int
============= ================== =======
```

市場の営業状態は以下の値を取ります:
* 0: 営業中（通常取引が可能な状態）
* 1: 停止中（取引停止状態）
* 2: プレオープン（注文は受付可能だが約定しない状態）
* 3: 板寄せ中（集められた注文の一括処理を実行）
* 4: 板寄せ完了（板寄せ処理完了後の状態）

currency_pairにallを指定した場合、有効な全ての通貨ペアの営業状態を取得します。
```
[
    {
        "currency_pair": "btc_jpy",
        "market_status": 0
    },
    {
        "currency_pair": "eth_jpy", 
        "market_status": 0
    }
    ...
]
```
currency_pairにbtc_jpy等、有効な通貨ペアを指定した場合、その通貨ペアの営業状態のみを取得します。
```
[
    {
        "currency_pair": "btc_jpy",
        "market_status": 0
    }
]
```

#### エラーメッセージ
```eval_rst
=============================================== ===================================================================
メッセージ                                      詳細
=============================================== ===================================================================
unsupported currency_pair                       サポートされていない通貨ペアです。
currency_pair missing                           リクエストされた通貨ペアが不適切です。
=============================================== ===================================================================
```
